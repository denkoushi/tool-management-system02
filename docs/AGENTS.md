# AGENTS.md

このファイルは、エージェント／タスク実行時の基本的な約束事とプロジェクト構成を共有するための指針です。新しいスレッドや自動化タスクを開始するときは、まずここを参照してください。

## 1. プロジェクト構成

### 1.1 ウィンドウの役割
- **ウィンドウA**: `/Users/tsudatakashi/tool-management-system02`
- **ウィンドウB**: `/Users/tsudatakashi/DocumentViewer`
- **ウィンドウC**: `/Users/tsudatakashi/RaspberryPizero2W_withDropbox`

各ウィンドウのコンテキストは独立して扱います。別ウィンドウの情報が必要な場合は必ずユーザーに確認してから共有してください。

### 1.2 初期タスク
- ウィンドウAの要件・開発進捗・残タスクを把握し、`docs/requirements.md` に沿って確認する。
- ドキュメントの役割分担は `docs/documentation-guidelines.md` を参照する。

## 2. コミュニケーション指針
- 使用言語: 日本語。
- コードは **コードブロック** で提示する。
- ラズパイ操作コマンドを提示するときは、以下を含めること:
  1. 実行コマンド
  2. 期待される出力（概要）
  3. エラー時の診断コマンド
  4. 必要に応じて再起動・状態確認・ロールバック手順

## 3. 開発プロセス
- ブランチ戦略:
  - 通常の開発は `main` ブランチにコミット。小規模変更は直接反映してよい。
  - リスクが高い／大規模改修（影響範囲が広い、機能削除、ロールバックが難しいなど）はブランチを作成し、ラズパイ上で検証後に `main` へマージする。
- 要件定義は `docs/requirements.md` を必ず更新し、漏れや重複がないように記録する。
- コード実装前に複数案を提案し、推奨案と理由を明示してユーザーと合意する。
- 仕様不明点があれば、作業前に必ずユーザーへ確認する。確認した内容は `docs/requirements.md` 等に反映する。

## 4. ドキュメントとコンテキスト
- ドキュメント更新は `docs/documentation-guidelines.md` のルールに従う。
- 機能追加・運用手順・構築手順・トラブルシュートは指示がなくても適切なタイミングで文書化する。
- `AGENTS.md` は新しいスレッド開始時に必ず確認し、遵守すること。

## 5. 作業前チェックリスト
- 現在のブランチとローカル変更 (`git status -sb`) を確認する。
- 参照するウィンドウ／リポジトリが正しいか再確認する。
- 既存のドキュメント（README / RUNBOOK / `docs/requirements.md`）を読み、最新の方針と整合しているかを確認する。
- 分からない点はユーザーへ質問し、回答を記録する。

## 6. エラー時の対応
- エラーが発生した場合は原因と復旧手順を提示する。可能であれば予防策も提案する。
- 自動でロールバックしてよいか判断に迷う場合は、ユーザーへ確認の上で実施する。
- ログや診断コマンドの結果は必要に応じて報告する。

## 7. 提案スタイル
- 複数案を提示し、推奨案と理由、トレードオフを明確にする。
- ユーザーからの決定が得られたら、その内容を `docs/requirements.md` や関連ドキュメントに反映する。

## 8. リンク集
- ドキュメント運用ガイドライン: `docs/documentation-guidelines.md`
- 要件とロードマップ: `docs/requirements.md`
- セキュリティ概要: `docs/security-overview.md`
- セキュリティ要求対応: `docs/security-requirements-response.md`

この指針に従うことで、エージェント間の作業や新しいスレッドへの引き継ぎをスムーズに行えます。